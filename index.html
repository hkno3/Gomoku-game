<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì˜¤ëª© ê²Œì„</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
            color: white;
        }
        
        h1 {
            font-size: 2.5rem;
            margin-bottom: 20px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
            background: linear-gradient(45deg, #ffd700, #ffed4e);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        
        .game-container {
            display: flex;
            gap: 30px;
            align-items: flex-start;
            flex-wrap: wrap;
            justify-content: center;
        }
        
        .board-container {
            background: #8B4513;
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
        }
        
        .board {
            position: relative;
            background: #DEB887;
            width: 450px;
            height: 450px;
            border: 2px solid #654321;
            border-radius: 8px;
        }
        
        .line {
            position: absolute;
            background: #654321;
        }
        
        .line.horizontal {
            width: 100%;
            height: 1px;
        }
        
        .line.vertical {
            height: 100%;
            width: 1px;
        }
        
        .star-point {
            position: absolute;
            width: 6px;
            height: 6px;
            background: #654321;
            border-radius: 50%;
            transform: translate(-50%, -50%);
        }
        
        .intersection {
            position: absolute;
            width: 25px;
            height: 25px;
            border-radius: 50%;
            cursor: pointer;
            transform: translate(-50%, -50%);
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .intersection:hover {
            background: rgba(255, 255, 255, 0.2);
        }
        
        .stone {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
            animation: placeStone 0.3s ease-out;
        }
        
        @keyframes placeStone {
            0% { transform: scale(0); }
            50% { transform: scale(1.2); }
            100% { transform: scale(1); }
        }
        
        .stone.black {
            background: radial-gradient(circle at 30% 30%, #444, #000);
            border: 1px solid #333;
        }
        
        .stone.white {
            background: radial-gradient(circle at 30% 30%, #fff, #ddd);
            border: 1px solid #ccc;
        }
        
        .stone.winning {
            animation: winPulse 1s ease-in-out infinite;
        }
        
        @keyframes winPulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); box-shadow: 0 0 10px #ffd700; }
        }
        
        .game-info {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 20px;
            min-width: 280px;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3);
        }
        
        .mode-selector {
            margin-bottom: 20px;
        }
        
        .mode-btn {
            width: 100%;
            padding: 10px;
            margin: 5px 0;
            border: none;
            border-radius: 8px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .mode-btn.active {
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
        }
        
        .mode-btn:not(.active) {
            background: rgba(255, 255, 255, 0.2);
            color: white;
        }
        
        .mode-btn:hover {
            transform: translateY(-2px);
        }
        
        .player-info {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 10px;
            margin: 10px 0;
            border-radius: 8px;
            background: rgba(255, 255, 255, 0.1);
        }
        
        .player-info.active {
            background: linear-gradient(45deg, #ffd700, #ffed4e);
            color: #333;
        }
        
        .player-name {
            font-weight: bold;
        }
        
        .player-stone {
            width: 16px;
            height: 16px;
            border-radius: 50%;
            border: 2px solid;
        }
        
        .black-stone-indicator {
            background: #000;
            border-color: #333;
        }
        
        .white-stone-indicator {
            background: #fff;
            border-color: #ccc;
        }
        
        .ai-thinking {
            display: none;
            text-align: center;
            padding: 10px;
            background: rgba(255, 215, 0, 0.2);
            border-radius: 8px;
            margin: 10px 0;
        }
        
        .thinking-dots::after {
            content: '';
            animation: dots 1.5s steps(4, end) infinite;
        }
        
        @keyframes dots {
            0%, 20% { content: ''; }
            40% { content: '.'; }
            60% { content: '..'; }
            80%, 100% { content: '...'; }
        }
        
        .game-status {
            text-align: center;
            font-size: 1.1rem;
            font-weight: bold;
            margin: 15px 0;
            padding: 8px;
            border-radius: 8px;
            background: rgba(255, 255, 255, 0.1);
        }
        
        .btn {
            width: 100%;
            padding: 8px 16px;
            margin: 5px 0;
            border: none;
            border-radius: 6px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .btn-primary {
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
        }
        
        .btn-secondary {
            background: linear-gradient(45deg, #f093fb, #f5576c);
            color: white;
        }
        
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
        }
        
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }
        
        .modal-content {
            background: linear-gradient(135deg, #667eea, #764ba2);
            padding: 30px;
            border-radius: 15px;
            text-align: center;
            color: white;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.5);
        }
        
        @media (max-width: 768px) {
            .game-container {
                flex-direction: column;
                align-items: center;
            }
            
            .board {
                width: 300px;
                height: 300px;
            }
            
            .intersection {
                width: 16px;
                height: 16px;
            }
            
            .stone {
                width: 14px;
                height: 14px;
            }
        }
    </style>
</head>
<body>
    <h1>ğŸ”´ ì˜¤ëª© ê²Œì„ âšª</h1>
    
    <div class="game-container">
        <div class="board-container">
            <div class="board" id="gameBoard"></div>
        </div>
        
        <div class="game-info">
            <div class="mode-selector">
                <h3 style="margin-bottom: 10px; text-align: center;">ê²Œì„ ëª¨ë“œ</h3>
                <button class="mode-btn active" id="pvpMode">ğŸ‘¥ í”Œë ˆì´ì–´ vs í”Œë ˆì´ì–´</button>
                <button class="mode-btn" id="pvcMode">ğŸ¤– í”Œë ˆì´ì–´ vs AI</button>
            </div>
            
            <div class="game-status" id="gameStatus">í‘ëŒì˜ ì°¨ë¡€</div>
            
            <div class="ai-thinking" id="aiThinking">
                ğŸ¤– AIê°€ ë¶„ì„í•˜ëŠ” ì¤‘<span class="thinking-dots"></span>
            </div>
            
            <div class="player-info active" id="blackPlayer">
                <div class="player-name">í”Œë ˆì´ì–´ 1 (í‘ëŒ)</div>
                <div class="player-stone black-stone-indicator"></div>
            </div>
            
            <div class="player-info" id="whitePlayer">
                <div class="player-name">í”Œë ˆì´ì–´ 2 (ë°±ëŒ)</div>
                <div class="player-stone white-stone-indicator"></div>
            </div>
            
            <button class="btn btn-primary" onclick="newGame()">ìƒˆ ê²Œì„</button>
            <button class="btn btn-secondary" onclick="undoMove()">ë¬´ë¥´ê¸°</button>
        </div>
    </div>
    
    <div class="modal" id="gameModal">
        <div class="modal-content">
            <h2 id="modalTitle">ê²Œì„ ì¢…ë£Œ</h2>
            <p id="modalMessage">ê²Œì„ì´ ëë‚¬ìŠµë‹ˆë‹¤!</p>
            <button class="btn btn-primary" onclick="closeModal()">í™•ì¸</button>
        </div>
    </div>

    <script>
        // ê²Œì„ ìƒíƒœ
        const BOARD_SIZE = 15;
        const EMPTY = 0;
        const BLACK = 1;
        const WHITE = 2;
        
        let board = [];
        let currentPlayer = BLACK;
        let gameMode = 'pvp';
        let gameOver = false;
        let moveHistory = [];
        let isAIThinking = false;
        
        // ê²Œì„ ì´ˆê¸°í™”
        function initGame() {
            board = Array(BOARD_SIZE).fill(null).map(() => Array(BOARD_SIZE).fill(EMPTY));
            currentPlayer = BLACK;
            gameOver = false;
            moveHistory = [];
            isAIThinking = false;
            
            createBoard();
            updateUI();
        }
        
        // ë³´ë“œ ìƒì„±
        function createBoard() {
            const boardElement = document.getElementById('gameBoard');
            boardElement.innerHTML = '';
            
            // ê²©ìì„  ìƒì„±
            for (let i = 0; i < BOARD_SIZE; i++) {
                // ê°€ë¡œì„ 
                const hLine = document.createElement('div');
                hLine.className = 'line horizontal';
                hLine.style.top = `${(i * 100) / (BOARD_SIZE - 1)}%`;
                boardElement.appendChild(hLine);
                
                // ì„¸ë¡œì„ 
                const vLine = document.createElement('div');
                vLine.className = 'line vertical';
                vLine.style.left = `${(i * 100) / (BOARD_SIZE - 1)}%`;
                boardElement.appendChild(vLine);
            }
            
            // í™”ì  ìƒì„±
            const starPoints = [[3,3], [3,11], [7,7], [11,3], [11,11]];
            starPoints.forEach(([row, col]) => {
                const star = document.createElement('div');
                star.className = 'star-point';
                star.style.left = `${(col * 100) / (BOARD_SIZE - 1)}%`;
                star.style.top = `${(row * 100) / (BOARD_SIZE - 1)}%`;
                boardElement.appendChild(star);
            });
            
            // êµì°¨ì  ìƒì„±
            for (let row = 0; row < BOARD_SIZE; row++) {
                for (let col = 0; col < BOARD_SIZE; col++) {
                    const intersection = document.createElement('div');
                    intersection.className = 'intersection';
                    intersection.style.left = `${(col * 100) / (BOARD_SIZE - 1)}%`;
                    intersection.style.top = `${(row * 100) / (BOARD_SIZE - 1)}%`;
                    intersection.dataset.row = row;
                    intersection.dataset.col = col;
                    intersection.addEventListener('click', () => handleClick(row, col));
                    boardElement.appendChild(intersection);
                }
            }
        }
        
        // í´ë¦­ ì²˜ë¦¬
        function handleClick(row, col) {
            if (gameOver || board[row][col] !== EMPTY || isAIThinking) return;
            
            makeMove(row, col);
        }
        
        // ìˆ˜ ë‘ê¸°
        function makeMove(row, col) {
            if (board[row][col] !== EMPTY) return false;
            
            // ëŒ ë†“ê¸°
            board[row][col] = currentPlayer;
            moveHistory.push({ row, col, player: currentPlayer });
            
            // ëŒ í‘œì‹œ
            const intersection = document.querySelector(`[data-row="${row}"][data-col="${col}"]`);
            const stone = document.createElement('div');
            stone.className = `stone ${currentPlayer === BLACK ? 'black' : 'white'}`;
            intersection.appendChild(stone);
            
            // ìŠ¹ë¦¬ í™•ì¸
            if (checkWin(row, col)) {
                endGame(currentPlayer);
                return true;
            }
            
            // ë¬´ìŠ¹ë¶€ í™•ì¸
            if (moveHistory.length === BOARD_SIZE * BOARD_SIZE) {
                endGame(null);
                return true;
            }
            
            // í”Œë ˆì´ì–´ ì „í™˜
            currentPlayer = currentPlayer === BLACK ? WHITE : BLACK;
            updateUI();
            
            // AI í„´
            if (gameMode === 'pvc' && currentPlayer === WHITE && !gameOver) {
                setTimeout(makeAIMove, 1000);
            }
            
            return true;
        }
        
        // AI ì´ë™ (ê°•í™”ëœ ë²„ì „)
        function makeAIMove() {
            isAIThinking = true;
            document.getElementById('aiThinking').style.display = 'block';
            updateUI();
            
            setTimeout(() => {
                const move = getSmartAIMove();
                if (move) {
                    makeMove(move.row, move.col);
                }
                
                isAIThinking = false;
                document.getElementById('aiThinking').style.display = 'none';
                updateUI();
            }, 1500);
        }
        
        // ë˜‘ë˜‘í•œ AI ìˆ˜ ê³„ì‚°
        function getSmartAIMove() {
            console.log("Smart AI analyzing...");
            
            // 1. ì¦‰ì‹œ ìŠ¹ë¦¬ ìˆ˜
            const winMove = findPattern(WHITE, 5);
            if (winMove) {
                console.log("AI wins!", winMove);
                return winMove;
            }
            
            // 2. ìƒëŒ€ë°© ì¦‰ì‹œ ìŠ¹ë¦¬ ì°¨ë‹¨
            const blockWin = findPattern(BLACK, 5);
            if (blockWin) {
                console.log("Block win", blockWin);
                return blockWin;
            }
            
            // 3. 4ëª© ë§Œë“¤ê¸°
            const makeFour = findPattern(WHITE, 4);
            if (makeFour) {
                console.log("Make four", makeFour);
                return makeFour;
            }
            
            // 4. ìƒëŒ€ë°© 4ëª© ì°¨ë‹¨
            const blockFour = findPattern(BLACK, 4);
            if (blockFour) {
                console.log("Block four", blockFour);
                return blockFour;
            }
            
            // 5. 3ëª© ë§Œë“¤ê¸°/ì°¨ë‹¨
            const makeThree = findPattern(WHITE, 3);
            const blockThree = findPattern(BLACK, 3);
            
            if (blockThree) {
                console.log("Block three", blockThree);
                return blockThree;
            }
            
            if (makeThree) {
                console.log("Make three", makeThree);
                return makeThree;
            }
            
            // 6. ìµœì  ìœ„ì¹˜ ì°¾ê¸°
            return findBestPosition();
        }
        
        // íŒ¨í„´ ì°¾ê¸° (nê°œ ì—°ì†)
        function findPattern(player, targetCount) {
            const directions = [[1,0], [0,1], [1,1], [1,-1]];
            
            for (let row = 0; row < BOARD_SIZE; row++) {
                for (let col = 0; col < BOARD_SIZE; col++) {
                    if (board[row][col] === EMPTY) {
                        // ì´ ìœ„ì¹˜ì— ëŒì„ ë†“ì•˜ì„ ë•Œì˜ íš¨ê³¼ í™•ì¸
                        for (const [dr, dc] of directions) {
                            const count = countInDirection(row, col, dr, dc, player);
                            
                            if (targetCount === 5 && count >= 5) {
                                return { row, col };
                            } else if (targetCount === 4 && count === 4) {
                                // 4ëª©ì¸ì§€ í™•ì¸ (ì–‘ìª½ì´ ì—´ë ¤ìˆê±°ë‚˜ í•œìª½ì´ë¼ë„ ì—´ë ¤ìˆìœ¼ë©´)
                                if (isOpenEnded(row, col, dr, dc, player, 4)) {
                                    return { row, col };
                                }
                            } else if (targetCount === 3 && count === 3) {
                                // 3ëª© ì¤‘ì—ì„œë„ ìœ„í—˜í•œ ê²ƒ ìš°ì„ 
                                if (isOpenEnded(row, col, dr, dc, player, 3)) {
                                    return { row, col };
                                }
                            }
                        }
                    }
                }
            }
            
            return null;
        }
        
        // ë°©í–¥ìœ¼ë¡œ ì—°ì†ëœ ëŒ ê°œìˆ˜ ì„¸ê¸°
        function countInDirection(row, col, dr, dc, player) {
            let count = 1; // ë†“ì„ ëŒ í¬í•¨
            
            // í•œ ë°©í–¥
            for (let i = 1; i < 5; i++) {
                const r = row + dr * i;
                const c = col + dc * i;
                if (r < 0 || r >= BOARD_SIZE || c < 0 || c >= BOARD_SIZE || board[r][c] !== player) {
                    break;
                }
                count++;
            }
            
            // ë°˜ëŒ€ ë°©í–¥
            for (let i = 1; i < 5; i++) {
                const r = row - dr * i;
                const c = col - dc * i;
                if (r < 0 || r >= BOARD_SIZE || c < 0 || c >= BOARD_SIZE || board[r][c] !== player) {
                    break;
                }
                count++;
            }
            
            return count;
        }
        
        // ì—´ë¦° ëì¸ì§€ í™•ì¸
        function isOpenEnded(row, col, dr, dc, player, targetCount) {
            let openEnds = 0;
            let actualCount = 1;
            
            // í•œ ë°©í–¥ í™•ì¸
            let i = 1;
            while (i <= 5) {
                const r = row + dr * i;
                const c = col + dc * i;
                
                if (r < 0 || r >= BOARD_SIZE || c < 0 || c >= BOARD_SIZE) break;
                
                if (board[r][c] === player) {
                    actualCount++;
                    i++;
                } else if (board[r][c] === EMPTY) {
                    if (actualCount >= targetCount) openEnds++;
                    break;
                } else {
                    break;
                }
            }
            
            // ë°˜ëŒ€ ë°©í–¥ í™•ì¸
            i = 1;
            while (i <= 5) {
                const r = row - dr * i;
                const c = col - dc * i;
                
                if (r < 0 || r >= BOARD_SIZE || c < 0 || c >= BOARD_SIZE) break;
                
                if (board[r][c] === player) {
                    actualCount++;
                    i++;
                } else if (board[r][c] === EMPTY) {
                    if (actualCount >= targetCount) openEnds++;
                    break;
                } else {
                    break;
                }
            }
            
            return openEnds > 0;
        }
        
        // ìµœì  ìœ„ì¹˜ ì°¾ê¸°
        function findBestPosition() {
            let bestScore = -1;
            let bestMove = null;
            
            // ê¸°ì¡´ ëŒ ì£¼ë³€ 2ì¹¸ ì´ë‚´ë§Œ ê²€ì‚¬
            const candidates = [];
            const checked = new Set();
            
            for (let row = 0; row < BOARD_SIZE; row++) {
                for (let col = 0; col < BOARD_SIZE; col++) {
                    if (board[row][col] !== EMPTY) {
                        for (let dr = -2; dr <= 2; dr++) {
                            for (let dc = -2; dc <= 2; dc++) {
                                const r = row + dr;
                                const c = col + dc;
                                const key = `${r},${c}`;
                                
                                if (r >= 0 && r < BOARD_SIZE && c >= 0 && c < BOARD_SIZE && 
                                    board[r][c] === EMPTY && !checked.has(key)) {
                                    candidates.push({ row: r, col: c });
                                    checked.add(key);
                                }
                            }
                        }
                    }
                }
            }
            
            // ì²« ìˆ˜ì¸ ê²½ìš° ì¤‘ì•™
            if (candidates.length === 0) {
                return { row: 7, col: 7 };
            }
            
            // ê° í›„ë³´ í‰ê°€
            for (const candidate of candidates) {
                const score = evaluatePosition(candidate.row, candidate.col);
                if (score > bestScore) {
                    bestScore = score;
                    bestMove = candidate;
                }
            }
            
            return bestMove;
        }
        
        // ìœ„ì¹˜ í‰ê°€
        function evaluatePosition(row, col) {
            let score = 0;
            
            // AI ê³µê²©ë ¥
            score += evaluatePlayerAtPosition(row, col, WHITE) * 1.0;
            
            // ìƒëŒ€ë°© ë°©ì–´ (ë” ì¤‘ìš”)
            score += evaluatePlayerAtPosition(row, col, BLACK) * 1.2;
            
            // ì¤‘ì•™ ë³´ë„ˆìŠ¤
            const centerDist = Math.abs(row - 7) + Math.abs(col - 7);
            score += Math.max(0, 20 - centerDist * 2);
            
            return score;
        }
        
        // íŠ¹ì • í”Œë ˆì´ì–´ ê´€ì ì—ì„œ ìœ„ì¹˜ í‰ê°€
        function evaluatePlayerAtPosition(row, col, player) {
            let score = 0;
            const directions = [[1,0], [0,1], [1,1], [1,-1]];
            
            for (const [dr, dc] of directions) {
                const count = countInDirection(row, col, dr, dc, player);
                
                if (count >= 4) score += 1000;
                else if (count === 3) score += 100;
                else if (count === 2) score += 10;
                else if (count === 1) score += 1;
            }
            
            return score;
        }
        
        // ìŠ¹ë¦¬ í™•ì¸
        function checkWin(row, col) {
            const player = board[row][col];
            const directions = [[1,0], [0,1], [1,1], [1,-1]];
            
            for (const [dr, dc] of directions) {
                let count = 1;
                
                // í•œ ë°©í–¥
                for (let i = 1; i < 5; i++) {
                    const r = row + dr * i;
                    const c = col + dc * i;
                    if (r < 0 || r >= BOARD_SIZE || c < 0 || c >= BOARD_SIZE || board[r][c] !== player) break;
                    count++;
                }
                
                // ë°˜ëŒ€ ë°©í–¥
                for (let i = 1; i < 5; i++) {
                    const r = row - dr * i;
                    const c = col - dc * i;
                    if (r < 0 || r >= BOARD_SIZE || c < 0 || c >= BOARD_SIZE || board[r][c] !== player) break;
                    count++;
                }
                
                if (count >= 5) return true;
            }
            
            return false;
        }
        
        // ê²Œì„ ì¢…ë£Œ
        function endGame(winner) {
            gameOver = true;
            
            if (winner) {
                highlightWinningStones();
                
                const winnerName = winner === BLACK ? 
                    (gameMode === 'pvc' ? 'í”Œë ˆì´ì–´' : 'í”Œë ˆì´ì–´ 1') :
                    (gameMode === 'pvc' ? 'AI' : 'í”Œë ˆì´ì–´ 2');
                
                document.getElementById('modalTitle').textContent = 'ğŸ‰ ìŠ¹ë¦¬!';
                document.getElementById('modalMessage').textContent = `${winnerName}ì´(ê°€) ìŠ¹ë¦¬í–ˆìŠµë‹ˆë‹¤!`;
            } else {
                document.getElementById('modalTitle').textContent = 'ë¬´ìŠ¹ë¶€';
                document.getElementById('modalMessage').textContent = 'ê²Œì„ì´ ë¬´ìŠ¹ë¶€ë¡œ ëë‚¬ìŠµë‹ˆë‹¤.';
            }
            
            document.getElementById('gameModal').style.display = 'flex';
        }
        
        // ìŠ¹ë¦¬ ëŒ í•˜ì´ë¼ì´íŠ¸
        function highlightWinningStones() {
            const lastMove = moveHistory[moveHistory.length - 1];
            if (!lastMove) return;
            
            const { row, col, player } = lastMove;
            const directions = [[1,0], [0,1], [1,1], [1,-1]];
            
            for (const [dr, dc] of directions) {
                const stones = [[row, col]];
                
                // í•œ ë°©í–¥
                for (let i = 1; i < 5; i++) {
                    const r = row + dr * i;
                    const c = col + dc * i;
                    if (r < 0 || r >= BOARD_SIZE || c < 0 || c >= BOARD_SIZE || board[r][c] !== player) break;
                    stones.push([r, c]);
                }
                
                // ë°˜ëŒ€ ë°©í–¥
                for (let i = 1; i < 5; i++) {
                    const r = row - dr * i;
                    const c = col - dc * i;
                    if (r < 0 || r >= BOARD_SIZE || c < 0 || c >= BOARD_SIZE || board[r][c] !== player) break;
                    stones.push([r, c]);
                }
                
                if (stones.length >= 5) {
                    stones.forEach(([r, c]) => {
                        const intersection = document.querySelector(`[data-row="${r}"][data-col="${c}"]`);
                        if (intersection) {
                            const stone = intersection.querySelector('.stone');
                            if (stone) stone.classList.add('winning');
                        }
                    });
                    break;
                }
            }
        }
        
        // UI ì—…ë°ì´íŠ¸
        function updateUI() {
            document.getElementById('blackPlayer').classList.toggle('active', currentPlayer === BLACK);
            document.getElementById('whitePlayer').classList.toggle('active', currentPlayer === WHITE);
            
            if (gameOver) {
                document.getElementById('gameStatus').textContent = 'ê²Œì„ ì¢…ë£Œ';
            } else if (isAIThinking) {
                document.getElementById('gameStatus').textContent = 'AI ë¶„ì„ ì¤‘...';
            } else {
                const playerName = currentPlayer === BLACK ? 
                    (gameMode === 'pvc' ? 'í”Œë ˆì´ì–´' : 'í”Œë ˆì´ì–´ 1') :
                    (gameMode === 'pvc' ? 'AI' : 'í”Œë ˆì´ì–´ 2');
                document.getElementById('gameStatus').textContent = `${playerName}ì˜ ì°¨ë¡€`;
            }
            
            // í”Œë ˆì´ì–´ ì´ë¦„ ì—…ë°ì´íŠ¸
            if (gameMode === 'pvc') {
                document.querySelector('#blackPlayer .player-name').textContent = 'í”Œë ˆì´ì–´ (í‘ëŒ)';
                document.querySelector('#whitePlayer .player-name').textContent = 'AI (ë°±ëŒ)';
            } else {
                document.querySelector('#blackPlayer .player-name').textContent = 'í”Œë ˆì´ì–´ 1 (í‘ëŒ)';
                document.querySelector('#whitePlayer .player-name').textContent = 'í”Œë ˆì´ì–´ 2 (ë°±ëŒ)';
            }
        }
        
        // ëª¨ë“œ ë³€ê²½
        function setGameMode(mode) {
            gameMode = mode;
            
            document.getElementById('pvpMode').classList.toggle('active', mode === 'pvp');
            document.getElementById('pvcMode').classList.toggle('active', mode === 'pvc');
            
            newGame();
        }
        
        // ìƒˆ ê²Œì„
        function newGame() {
            initGame();
        }
        
        // ë¬´ë¥´ê¸°
        function undoMove() {
            if (moveHistory.length === 0 || gameOver) return;
            
            const lastMove = moveHistory.pop();
            board[lastMove.row][lastMove.col] = EMPTY;
            
            const intersection = document.querySelector(`[data-row="${lastMove.row}"][data-col="${lastMove.col}"]`);
            const stone = intersection.querySelector('.stone');
            if (stone) stone.remove();
            
            // AI ëª¨ë“œì—ì„œëŠ” ë‘ ìˆ˜ ë¬´ë¥´ê¸°
            if (gameMode === 'pvc' && moveHistory.length > 0 && moveHistory[moveHistory.length - 1].player === WHITE) {
                const aiMove = moveHistory.pop();
                board[aiMove.row][aiMove.col] = EMPTY;
                
                const aiIntersection = document.querySelector(`[data-row="${aiMove.row}"][data-col="${aiMove.col}"]`);
                const aiStone = aiIntersection.querySelector('.stone');
                if (aiStone) aiStone.remove();
            }
            
            currentPlayer = BLACK;
            updateUI();
        }
        
        // ëª¨ë‹¬ ë‹«ê¸°
        function closeModal() {
            document.getElementById('gameModal').style.display = 'none';
        }
        
        // ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ
        document.getElementById('pvpMode').addEventListener('click', () => setGameMode('pvp'));
        document.getElementById('pvcMode').addEventListener('click', () => setGameMode('pvc'));
        
        // ê²Œì„ ì‹œì‘
        initGame();
    </script>
</body>
</html>
